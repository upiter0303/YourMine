# 프로젝트 : 중고 거래 사이트 YourMineMarket


## 기획 의도
그동안 익힌 내용들을 최대한 사용할 수 있으며, 추가적인 공부를 통해 새로운 기능들을 유연하게 추가할 수 있는 구성을 의도했습니다.

이에 가장 기본적인 게시판 형식의 사이트, 그 중에서도 중고 거래 장터 포멧을 떠올렸고 이를 구현하였습니다.

CRUD기능 위주로 구성하였으며 일반적인 거래사이트의 기본적 기능들을 포함하기 위해 노력하였습니다. 

## 개발 환경

- IntelliJ
- Github
- MySQL db
- AWS EC2
- AWS S3
- Travis CI
- LINUX

### backend
- java 11
- springboot 2.1.7
- Gradle
- JPA

### frontend
- Javascript
- jQuery
- Bootstrap
- Mustache

## 구현 기능

### 메인
![메인](https://user-images.githubusercontent.com/76996298/159413675-62b9c51f-43be-4b00-a0fb-fb8613ca9183.jpg)
![카테고리](https://user-images.githubusercontent.com/76996298/159413679-f58c2e26-6a51-4fb0-ba4e-df8b740ec49a.jpg)

- 사이트의 기본 기능인 로그인, 회원가입, 게시글 작성, 카테고리별 상품목록 페이지로 갈 수 있는 상단바가 위치합니다.
- 로그인시 마이페이지 링크가 추가되고 관리자 계정일경우 관리자페이지 링크 또한 추가됩니다.
- 검색기능은 제목과 내용에 포함된 키워드를 조회합니다.

![게시글 목록](https://user-images.githubusercontent.com/76996298/159413690-d29184fe-46ba-481a-86b8-a3e7277a6d28.jpg)

- 화면 하단에는 각각 게시글의 조회수, 등록 위치, 등록 시간 등을 기준으로 기본 게시물들이 조회됩니다.
- 초기에는 목록별 일정개수의 게시물만 조회되지만 필터나 검색기능을 이용해 조회할 경우, 무한 스크롤 방식으로 8개씩 추가 게시물이 표시됩니다.

### 로그인
![로그인페이지](https://user-images.githubusercontent.com/76996298/159413700-48369a6d-0308-4ef7-8d2a-5540651b3d51.jpg)

- spring security를 이용해 로그인 기능을 구현했습니다. 자체 회원가입과 Oauth2인증을 이용한 소셜로그인 방식 2가지를 지원합니다.
- 거래게시판 특성상 정보저장이 필요하여 각 인증시 받아온 최소한의 정보를 이용해 본 사이트에 자동적으로 가입이 진행됩니다.

### 회원가입
![회원가입](https://user-images.githubusercontent.com/76996298/159413717-127a505b-0433-4906-8b22-5727bce31024.jpg)
![메일](https://user-images.githubusercontent.com/76996298/159413762-a02a093d-38f9-48b8-b618-9be9f73cffef.jpg)

- 회원가입은 기본적인 입력사항의 유효성을 정규식과 db조회를 통해 확인한 뒤, 이메일 인증을 통해 가입됩니다.
- 소셜회원의 경우 별도의 과정 없이 이용한 메일이 자동으로 등록됩니다.
- 비밀번호는 Spring Security의 BCryptPasswordEncoder를 이용하여 암호화해 보관됩니다.

### 게시글
![게시글 작성](https://user-images.githubusercontent.com/76996298/159413787-a5eae0ef-49f7-4363-baa3-a383cb38c6c3.jpg)
![게시글 주소설정](https://user-images.githubusercontent.com/76996298/159418371-7292f3f4-db7d-473e-a2a7-ae2504cab72e.jpg)

- 게시글은 상품의 기본 정보와 1개 이상의 사진을 이용하면 작성됩니다. 직거래를 선택할 경우 가입자의 주소가 기본 선택되며 변경 가능합니다.
- 상품의 이미지는 최대 10장까지 업로드를 지원하며 실제 파일은 AmazonS3를 이용하여 저장됩니다.

![게시글 화면](https://user-images.githubusercontent.com/76996298/159413794-3bc2adc4-ee34-44d0-b4a6-919e578ccb5f.jpg)

- 작성된 게시물 페이지에서는 기본 정보와 함께 작성자의 타 게시글과 거래 평가 확인, 대화하기 기능, 찜하기 기능등을 지원합니다.
- 등록된 이미지는 bootstrap의 carousel을 이용 나열됩니다. 등록된 첫번째 이미지는 검색시 노출되는 썸네일로 설정됩니다.

### 대화기능
![채팅목록](https://user-images.githubusercontent.com/76996298/159418348-7f961a69-4bf8-406d-8a0c-ad42441736ac.jpg)

- 타인이 상품을 등록했을 경우 그 상대와 websocket을 이용한 실시간 대화기능을 지원합니다. 대화창에서 거래의 예약, 종료 상태 설정을 할 수 있습니다.
- 전송된 텍스트는 전송자, 전송시간이 db에 저장되며 이를 이용해 다시 대화창을 열었을때 확인 가능합니다.
- 각각의 게시글, 이용자별로 새로운 대화가 생성되며 생성된 대화방은 목록에서 확인하거나 삭제할 수 있습니다.

![채팅 알림](https://user-images.githubusercontent.com/76996298/159418360-dd401b2d-34b3-4c65-8448-9d67a2eb39d9.jpg)
![채팅 문자](https://user-images.githubusercontent.com/76996298/159418355-0c82eb69-1973-48fe-b0f5-a1916766e364.jpg)

- 확인하지 않은 대화 내역이 존재할 경우 페이지 이동시 알림 팝업이 노출됩니다.
- 최초로 시작된 대화의 경우 가입시 설정한 전화번호로 알림 메세지가 발송됩니다.

### 배포

- AWS의 EC2 인스턴스를 이용해 배포를 해보았습니다.
- db는 MySQL을 이용하였으며, 이미지와 같은 대용량 파일은 S3 bucket에 저장후, 주소만 db에 보관하였습니다.
- Travis Ci를 이용 Git에 push할 경우 자동 배포로 진행되게 설정하였습니다.

## 느낀점

단순한 구조의 웹 사이트를 제작하고 그 기능들을 구현하는일도 고려해야 할 사항이 상당히 많다는 사실을 알게 되었습니다.

또한 초심자들 끼리 프로젝트를 진행하다보니 지금 사용하고 있는 방식이, 방금 써내려간 코드가 좋은 방법인지 문제가 많은 방법인지
알 수 없었기에 힘이들었습니다.

그러나 이러한 상황속에서 생긴 문제나 의문점들을 반복해서 고민하고 검색하며 해결하면서 조금씩 더 배워가게 되었고
이 과정에서 기쁨과 재미를 느끼기도 하였었습니다.

별볼일 없는 문제와 단순한 해결방안이었을지 모르지만, 직접 찾아보고 결국 처리하였던 순간들은 좋은 경험이 되었다 생각합니다.
